/*!
 * imagesLoaded v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */ !function(t,e){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter")):t.imagesLoaded=e(t,t.EvEmitter)}("undefined"!=typeof window?window:this,function t(e,i){"use strict";var r=e.jQuery,o=e.console;function n(t,e){for(var i in e)t[i]=e[i];return t}var s=Array.prototype.slice;function h(t,e,i){if(!(this instanceof h))return new h(t,e,i);var a,p=t;if("string"==typeof t&&(p=document.querySelectorAll(t)),!p){o.error("Bad element for imagesLoaded "+(p||t));return}this.elements=Array.isArray(a=p)?a:"object"==typeof a&&"number"==typeof a.length?s.call(a):[a],this.options=n({},this.options),"function"==typeof e?i=e:n(this.options,e),i&&this.on("always",i),this.getImages(),r&&(this.jqDeferred=new r.Deferred),setTimeout(this.check.bind(this))}h.prototype=Object.create(i.prototype),h.prototype.options={},h.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},h.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),!0===this.options.background&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&a[e]){for(var i=t.querySelectorAll("img"),r=0;r<i.length;r++){var o=i[r];this.addImage(o)}if("string"==typeof this.options.background){var n=t.querySelectorAll(this.options.background);for(r=0;r<n.length;r++){var s=n[r];this.addElementBackgroundImages(s)}}}};var a={1:!0,9:!0,11:!0};function p(t){this.img=t}function d(t,e){this.url=t,this.element=e,this.img=new Image}return h.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var i=/url\((['"])?(.*?)\1\)/gi,r=i.exec(e.backgroundImage);null!==r;){var o=r&&r[2];o&&this.addBackground(o,t),r=i.exec(e.backgroundImage)}},h.prototype.addImage=function(t){var e=new p(t);this.images.push(e)},h.prototype.addBackground=function(t,e){var i=new d(t,e);this.images.push(i)},h.prototype.check=function(){var t=this;if(this.progressedCount=0,this.hasAnyBroken=!1,!this.images.length){this.complete();return}function e(e,i,r){setTimeout(function(){t.progress(e,i,r)})}this.images.forEach(function(t){t.once("progress",e),t.check()})},h.prototype.progress=function(t,e,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&o&&o.log("progress: "+i,t,e)},h.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred){var e=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[e](this)}},p.prototype=Object.create(i.prototype),p.prototype.check=function(){if(this.getIsImageComplete()){this.confirm(0!==this.img.naturalWidth,"naturalWidth");return}this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src},p.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},p.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},p.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},p.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},p.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},p.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},d.prototype=Object.create(p.prototype),d.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},d.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},d.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},h.makeJQueryPlugin=function(t){(t=t||e.jQuery)&&((r=t).fn.imagesLoaded=function(t,e){return new h(this,t,e).jqDeferred.promise(r(this))})},h.makeJQueryPlugin(),h});